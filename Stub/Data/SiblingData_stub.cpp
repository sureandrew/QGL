//-- Common
#include "Common.h"
//-- Self
#include "Stub/Data/SiblingData_stub.h"

void SiblingData_Stub::SetSibling_id(const UInt32 &sibling_id)
{
	bool modified = false;
	if (m.sibling_id != sibling_id) { m.sibling_id = sibling_id; modified = true; }
	MarkUpdateAll(sibling_idMask, modified);
}

void SiblingData_Stub::SetSibling_title_prefix(const String &sibling_title_prefix)
{
	bool modified = false;
	if (m.sibling_title_prefix != sibling_title_prefix) { m.sibling_title_prefix = sibling_title_prefix; modified = true; }
	MarkUpdateAll(sibling_title_prefixMask, modified);
}

void SiblingData_Stub::SetMember_id1(const UInt32 &member_id1)
{
	bool modified = false;
	if (m.member_id1 != member_id1) { m.member_id1 = member_id1; modified = true; }
	MarkUpdateAll(member_id1Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix1(const String &member_title_suffix1)
{
	bool modified = false;
	if (m.member_title_suffix1 != member_title_suffix1) { m.member_title_suffix1 = member_title_suffix1; modified = true; }
	MarkUpdateAll(member_title_suffix1Mask, modified);
}

void SiblingData_Stub::SetMember_id2(const UInt32 &member_id2)
{
	bool modified = false;
	if (m.member_id2 != member_id2) { m.member_id2 = member_id2; modified = true; }
	MarkUpdateAll(member_id2Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix2(const String &member_title_suffix2)
{
	bool modified = false;
	if (m.member_title_suffix2 != member_title_suffix2) { m.member_title_suffix2 = member_title_suffix2; modified = true; }
	MarkUpdateAll(member_title_suffix2Mask, modified);
}

void SiblingData_Stub::SetMember_id3(const UInt32 &member_id3)
{
	bool modified = false;
	if (m.member_id3 != member_id3) { m.member_id3 = member_id3; modified = true; }
	MarkUpdateAll(member_id3Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix3(const String &member_title_suffix3)
{
	bool modified = false;
	if (m.member_title_suffix3 != member_title_suffix3) { m.member_title_suffix3 = member_title_suffix3; modified = true; }
	MarkUpdateAll(member_title_suffix3Mask, modified);
}

void SiblingData_Stub::SetMember_id4(const UInt32 &member_id4)
{
	bool modified = false;
	if (m.member_id4 != member_id4) { m.member_id4 = member_id4; modified = true; }
	MarkUpdateAll(member_id4Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix4(const String &member_title_suffix4)
{
	bool modified = false;
	if (m.member_title_suffix4 != member_title_suffix4) { m.member_title_suffix4 = member_title_suffix4; modified = true; }
	MarkUpdateAll(member_title_suffix4Mask, modified);
}

void SiblingData_Stub::SetMember_id5(const UInt32 &member_id5)
{
	bool modified = false;
	if (m.member_id5 != member_id5) { m.member_id5 = member_id5; modified = true; }
	MarkUpdateAll(member_id5Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix5(const String &member_title_suffix5)
{
	bool modified = false;
	if (m.member_title_suffix5 != member_title_suffix5) { m.member_title_suffix5 = member_title_suffix5; modified = true; }
	MarkUpdateAll(member_title_suffix5Mask, modified);
}

void SiblingData_Stub::SetMember_id6(const UInt32 &member_id6)
{
	bool modified = false;
	if (m.member_id6 != member_id6) { m.member_id6 = member_id6; modified = true; }
	MarkUpdateAll(member_id6Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix6(const String &member_title_suffix6)
{
	bool modified = false;
	if (m.member_title_suffix6 != member_title_suffix6) { m.member_title_suffix6 = member_title_suffix6; modified = true; }
	MarkUpdateAll(member_title_suffix6Mask, modified);
}

void SiblingData_Stub::SetMember_id7(const UInt32 &member_id7)
{
	bool modified = false;
	if (m.member_id7 != member_id7) { m.member_id7 = member_id7; modified = true; }
	MarkUpdateAll(member_id7Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix7(const String &member_title_suffix7)
{
	bool modified = false;
	if (m.member_title_suffix7 != member_title_suffix7) { m.member_title_suffix7 = member_title_suffix7; modified = true; }
	MarkUpdateAll(member_title_suffix7Mask, modified);
}

void SiblingData_Stub::SetMember_id8(const UInt32 &member_id8)
{
	bool modified = false;
	if (m.member_id8 != member_id8) { m.member_id8 = member_id8; modified = true; }
	MarkUpdateAll(member_id8Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix8(const String &member_title_suffix8)
{
	bool modified = false;
	if (m.member_title_suffix8 != member_title_suffix8) { m.member_title_suffix8 = member_title_suffix8; modified = true; }
	MarkUpdateAll(member_title_suffix8Mask, modified);
}

void SiblingData_Stub::SetMember_id9(const UInt32 &member_id9)
{
	bool modified = false;
	if (m.member_id9 != member_id9) { m.member_id9 = member_id9; modified = true; }
	MarkUpdateAll(member_id9Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix9(const String &member_title_suffix9)
{
	bool modified = false;
	if (m.member_title_suffix9 != member_title_suffix9) { m.member_title_suffix9 = member_title_suffix9; modified = true; }
	MarkUpdateAll(member_title_suffix9Mask, modified);
}

void SiblingData_Stub::SetMember_id10(const UInt32 &member_id10)
{
	bool modified = false;
	if (m.member_id10 != member_id10) { m.member_id10 = member_id10; modified = true; }
	MarkUpdateAll(member_id10Mask, modified);
}

void SiblingData_Stub::SetMember_title_suffix10(const String &member_title_suffix10)
{
	bool modified = false;
	if (m.member_title_suffix10 != member_title_suffix10) { m.member_title_suffix10 = member_title_suffix10; modified = true; }
	MarkUpdateAll(member_title_suffix10Mask, modified);
}


void SiblingData_Stub::Clone(SiblingData_Stub* obj, const RPCMask &mask)
{
	if (obj == NULL) return;

	Parent::Clone(obj, mask);
	if (mask.IsBit(sibling_idMask) && !(obj->m.sibling_id == m.sibling_id)) {
		m.sibling_id = obj->m.sibling_id;
		MarkUpdateAll(sibling_idMask, true);
	}
	if (mask.IsBit(sibling_title_prefixMask) && !(obj->m.sibling_title_prefix == m.sibling_title_prefix)) {
		m.sibling_title_prefix = obj->m.sibling_title_prefix;
		MarkUpdateAll(sibling_title_prefixMask, true);
	}
	if (mask.IsBit(member_id1Mask) && !(obj->m.member_id1 == m.member_id1)) {
		m.member_id1 = obj->m.member_id1;
		MarkUpdateAll(member_id1Mask, true);
	}
	if (mask.IsBit(member_title_suffix1Mask) && !(obj->m.member_title_suffix1 == m.member_title_suffix1)) {
		m.member_title_suffix1 = obj->m.member_title_suffix1;
		MarkUpdateAll(member_title_suffix1Mask, true);
	}
	if (mask.IsBit(member_id2Mask) && !(obj->m.member_id2 == m.member_id2)) {
		m.member_id2 = obj->m.member_id2;
		MarkUpdateAll(member_id2Mask, true);
	}
	if (mask.IsBit(member_title_suffix2Mask) && !(obj->m.member_title_suffix2 == m.member_title_suffix2)) {
		m.member_title_suffix2 = obj->m.member_title_suffix2;
		MarkUpdateAll(member_title_suffix2Mask, true);
	}
	if (mask.IsBit(member_id3Mask) && !(obj->m.member_id3 == m.member_id3)) {
		m.member_id3 = obj->m.member_id3;
		MarkUpdateAll(member_id3Mask, true);
	}
	if (mask.IsBit(member_title_suffix3Mask) && !(obj->m.member_title_suffix3 == m.member_title_suffix3)) {
		m.member_title_suffix3 = obj->m.member_title_suffix3;
		MarkUpdateAll(member_title_suffix3Mask, true);
	}
	if (mask.IsBit(member_id4Mask) && !(obj->m.member_id4 == m.member_id4)) {
		m.member_id4 = obj->m.member_id4;
		MarkUpdateAll(member_id4Mask, true);
	}
	if (mask.IsBit(member_title_suffix4Mask) && !(obj->m.member_title_suffix4 == m.member_title_suffix4)) {
		m.member_title_suffix4 = obj->m.member_title_suffix4;
		MarkUpdateAll(member_title_suffix4Mask, true);
	}
	if (mask.IsBit(member_id5Mask) && !(obj->m.member_id5 == m.member_id5)) {
		m.member_id5 = obj->m.member_id5;
		MarkUpdateAll(member_id5Mask, true);
	}
	if (mask.IsBit(member_title_suffix5Mask) && !(obj->m.member_title_suffix5 == m.member_title_suffix5)) {
		m.member_title_suffix5 = obj->m.member_title_suffix5;
		MarkUpdateAll(member_title_suffix5Mask, true);
	}
	if (mask.IsBit(member_id6Mask) && !(obj->m.member_id6 == m.member_id6)) {
		m.member_id6 = obj->m.member_id6;
		MarkUpdateAll(member_id6Mask, true);
	}
	if (mask.IsBit(member_title_suffix6Mask) && !(obj->m.member_title_suffix6 == m.member_title_suffix6)) {
		m.member_title_suffix6 = obj->m.member_title_suffix6;
		MarkUpdateAll(member_title_suffix6Mask, true);
	}
	if (mask.IsBit(member_id7Mask) && !(obj->m.member_id7 == m.member_id7)) {
		m.member_id7 = obj->m.member_id7;
		MarkUpdateAll(member_id7Mask, true);
	}
	if (mask.IsBit(member_title_suffix7Mask) && !(obj->m.member_title_suffix7 == m.member_title_suffix7)) {
		m.member_title_suffix7 = obj->m.member_title_suffix7;
		MarkUpdateAll(member_title_suffix7Mask, true);
	}
	if (mask.IsBit(member_id8Mask) && !(obj->m.member_id8 == m.member_id8)) {
		m.member_id8 = obj->m.member_id8;
		MarkUpdateAll(member_id8Mask, true);
	}
	if (mask.IsBit(member_title_suffix8Mask) && !(obj->m.member_title_suffix8 == m.member_title_suffix8)) {
		m.member_title_suffix8 = obj->m.member_title_suffix8;
		MarkUpdateAll(member_title_suffix8Mask, true);
	}
	if (mask.IsBit(member_id9Mask) && !(obj->m.member_id9 == m.member_id9)) {
		m.member_id9 = obj->m.member_id9;
		MarkUpdateAll(member_id9Mask, true);
	}
	if (mask.IsBit(member_title_suffix9Mask) && !(obj->m.member_title_suffix9 == m.member_title_suffix9)) {
		m.member_title_suffix9 = obj->m.member_title_suffix9;
		MarkUpdateAll(member_title_suffix9Mask, true);
	}
	if (mask.IsBit(member_id10Mask) && !(obj->m.member_id10 == m.member_id10)) {
		m.member_id10 = obj->m.member_id10;
		MarkUpdateAll(member_id10Mask, true);
	}
	if (mask.IsBit(member_title_suffix10Mask) && !(obj->m.member_title_suffix10 == m.member_title_suffix10)) {
		m.member_title_suffix10 = obj->m.member_title_suffix10;
		MarkUpdateAll(member_title_suffix10Mask, true);
	}
}

void SiblingData_Stub::ReadAttr(CONST Buffer &buf)
{
	Parent::ReadAttr(buf);
	if (m_updateMask.IsBit(sibling_idMask))
	{
		buf.Read<UInt32>(m.sibling_id);
	}
	if (m_updateMask.IsBit(sibling_title_prefixMask))
	{
		buf.Read<String>(m.sibling_title_prefix);
	}
	if (m_updateMask.IsBit(member_id1Mask))
	{
		buf.Read<UInt32>(m.member_id1);
	}
	if (m_updateMask.IsBit(member_title_suffix1Mask))
	{
		buf.Read<String>(m.member_title_suffix1);
	}
	if (m_updateMask.IsBit(member_id2Mask))
	{
		buf.Read<UInt32>(m.member_id2);
	}
	if (m_updateMask.IsBit(member_title_suffix2Mask))
	{
		buf.Read<String>(m.member_title_suffix2);
	}
	if (m_updateMask.IsBit(member_id3Mask))
	{
		buf.Read<UInt32>(m.member_id3);
	}
	if (m_updateMask.IsBit(member_title_suffix3Mask))
	{
		buf.Read<String>(m.member_title_suffix3);
	}
	if (m_updateMask.IsBit(member_id4Mask))
	{
		buf.Read<UInt32>(m.member_id4);
	}
	if (m_updateMask.IsBit(member_title_suffix4Mask))
	{
		buf.Read<String>(m.member_title_suffix4);
	}
	if (m_updateMask.IsBit(member_id5Mask))
	{
		buf.Read<UInt32>(m.member_id5);
	}
	if (m_updateMask.IsBit(member_title_suffix5Mask))
	{
		buf.Read<String>(m.member_title_suffix5);
	}
	if (m_updateMask.IsBit(member_id6Mask))
	{
		buf.Read<UInt32>(m.member_id6);
	}
	if (m_updateMask.IsBit(member_title_suffix6Mask))
	{
		buf.Read<String>(m.member_title_suffix6);
	}
	if (m_updateMask.IsBit(member_id7Mask))
	{
		buf.Read<UInt32>(m.member_id7);
	}
	if (m_updateMask.IsBit(member_title_suffix7Mask))
	{
		buf.Read<String>(m.member_title_suffix7);
	}
	if (m_updateMask.IsBit(member_id8Mask))
	{
		buf.Read<UInt32>(m.member_id8);
	}
	if (m_updateMask.IsBit(member_title_suffix8Mask))
	{
		buf.Read<String>(m.member_title_suffix8);
	}
	if (m_updateMask.IsBit(member_id9Mask))
	{
		buf.Read<UInt32>(m.member_id9);
	}
	if (m_updateMask.IsBit(member_title_suffix9Mask))
	{
		buf.Read<String>(m.member_title_suffix9);
	}
	if (m_updateMask.IsBit(member_id10Mask))
	{
		buf.Read<UInt32>(m.member_id10);
	}
	if (m_updateMask.IsBit(member_title_suffix10Mask))
	{
		buf.Read<String>(m.member_title_suffix10);
	}
}

void SiblingData_Stub::WriteAttr(Buffer &buf, const RPCMask &mask) CONST
{
	Parent::WriteAttr(buf, mask);
	if (mask.IsBit(sibling_idMask))
	{
		buf.Write<UInt32>(m.sibling_id);
	}
	if (mask.IsBit(sibling_title_prefixMask))
	{
		buf.Write<String>(m.sibling_title_prefix);
	}
	if (mask.IsBit(member_id1Mask))
	{
		buf.Write<UInt32>(m.member_id1);
	}
	if (mask.IsBit(member_title_suffix1Mask))
	{
		buf.Write<String>(m.member_title_suffix1);
	}
	if (mask.IsBit(member_id2Mask))
	{
		buf.Write<UInt32>(m.member_id2);
	}
	if (mask.IsBit(member_title_suffix2Mask))
	{
		buf.Write<String>(m.member_title_suffix2);
	}
	if (mask.IsBit(member_id3Mask))
	{
		buf.Write<UInt32>(m.member_id3);
	}
	if (mask.IsBit(member_title_suffix3Mask))
	{
		buf.Write<String>(m.member_title_suffix3);
	}
	if (mask.IsBit(member_id4Mask))
	{
		buf.Write<UInt32>(m.member_id4);
	}
	if (mask.IsBit(member_title_suffix4Mask))
	{
		buf.Write<String>(m.member_title_suffix4);
	}
	if (mask.IsBit(member_id5Mask))
	{
		buf.Write<UInt32>(m.member_id5);
	}
	if (mask.IsBit(member_title_suffix5Mask))
	{
		buf.Write<String>(m.member_title_suffix5);
	}
	if (mask.IsBit(member_id6Mask))
	{
		buf.Write<UInt32>(m.member_id6);
	}
	if (mask.IsBit(member_title_suffix6Mask))
	{
		buf.Write<String>(m.member_title_suffix6);
	}
	if (mask.IsBit(member_id7Mask))
	{
		buf.Write<UInt32>(m.member_id7);
	}
	if (mask.IsBit(member_title_suffix7Mask))
	{
		buf.Write<String>(m.member_title_suffix7);
	}
	if (mask.IsBit(member_id8Mask))
	{
		buf.Write<UInt32>(m.member_id8);
	}
	if (mask.IsBit(member_title_suffix8Mask))
	{
		buf.Write<String>(m.member_title_suffix8);
	}
	if (mask.IsBit(member_id9Mask))
	{
		buf.Write<UInt32>(m.member_id9);
	}
	if (mask.IsBit(member_title_suffix9Mask))
	{
		buf.Write<String>(m.member_title_suffix9);
	}
	if (mask.IsBit(member_id10Mask))
	{
		buf.Write<UInt32>(m.member_id10);
	}
	if (mask.IsBit(member_title_suffix10Mask))
	{
		buf.Write<String>(m.member_title_suffix10);
	}
}

RPCResult SiblingData_Stub::SendAttr(LPCPEER pPeer, RPCContext &context, const RPCMask &mask)
{
	if (pPeer == NULL) return RPC_RESULT_FAIL;

	Buffer* pBuf = SafeCreateObject(Buffer);
	Reuben::Network::RPCHeader header(RPC_SiblingData_UP_STATE);
	pBuf->Write<Reuben::Network::RPCHeader>(header);
	pBuf->Write<RPCContext>(context);
	pBuf->Write<RPCNetID>(m_netId);
	WriteAttr(*pBuf, mask);

	return RPCSend(pPeer, pBuf);
}

#pragma optimize("", off)
RPCResult SiblingData_Stub::Process(const RPCID rpcId, LPCPEER pPeer, RPCContext &context, Buffer* pBuf)
{
	RPCResult _result = RPC_NOT_ACCESS;
	switch(rpcId)
	{
	case 0:
		break;
	case RPC_SiblingData_REQ_STATE:
		{
			RPCMask mask;
			pBuf->Read<RPCMask>(mask);
			_result = SendAttr(pPeer, context, mask);
		}
		break;
	default:
		_result = Parent::Process(rpcId, pPeer, context, pBuf);
	}
	return _result;
}
#pragma optimize("", on)

